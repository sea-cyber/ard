# 用户目录结构修复完成

## 修改内容

根据您的要求，已经修改了用户目录结构，现在网格ID会添加 `_RAW` 后缀。

### 修改的文件

1. **UserDataConfig.java** - 更新了路径构建方法
2. **用户数据目录结构说明.md** - 更新了目录结构示例
3. **测试路径构建.md** - 更新了预期结果

### 新的目录结构

**原始数据读取**：
```
ARD_CUB_GRIDT0_OFF_RAW/
└── GRID_CUBE_T0_N51E016010/
    └── 2025q1/
        ├── GRID_CUBE_T0_N51E016010_2025q1_B4.TIF
        └── GRID_CUBE_T0_N51E016010_2025q1_B5.TIF
```

**用户分析结果存储**：
```
ARD_CUB_GRIDT0_USR/
└── default_user/
    └── GRID_CUBE_T0_N51E016010_RAW/
        └── 2025q1/
            └── NDVI_ANALYSIS/
                └── ndvi_result_xxx.tif
```

### 关键修改

在 `UserDataConfig.java` 中：
```java
public String buildUserAnalysisPath(String username, String gridId, String quarter, String analysisType) {
    String rawGridId = gridId + "_RAW";
    return dataRootPath + "/" + username + "/" + rawGridId + "/" + quarter + "/" + analysisType;
}
```

### 预期结果

现在当您重新编译并运行任务时，应该会看到：

```
=== 构建输出路径 ===
username: default_user
cubeId: GRID_CUBE_T0_N51E016010
quarter: 2025q1
algorithmCode: NDVI_ANALYSIS
dataRootPath: D:/GISER/ard/development/userdata/ARD_CUB_GRIDT0_USR
resultDirectory: D:/GISER/ard/development/userdata/ARD_CUB_GRIDT0_USR/default_user/GRID_CUBE_T0_N51E016010_RAW/2025q1/NDVI_ANALYSIS
outputPath: D:/GISER/ard/development/userdata/ARD_CUB_GRIDT0_USR/default_user/GRID_CUBE_T0_N51E016010_RAW/2025q1/NDVI_ANALYSIS/ndvi_result_xxx.tif
==================
```

## 下一步

请重新编译并启动后端服务，然后运行NDVI分析任务来验证新的目录结构。
